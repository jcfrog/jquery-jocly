<!DOCTYPE html>
<html>
  <head>
    <meta charset='utf-8'>
    <meta http-equiv="X-UA-Compatible" content="chrome=1">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <link href='https://fonts.googleapis.com/css?family=Architects+Daughter' rel='stylesheet' type='text/css'>
    <link rel="stylesheet" type="text/css" href="stylesheets/stylesheet.css" media="screen" />
    <link rel="stylesheet" type="text/css" href="stylesheets/pygment_trac.css" media="screen" />
    <link rel="stylesheet" type="text/css" href="stylesheets/print.css" media="print" />
	<link rel="stylesheet" href="jquery.jocly.min.css">
 	<style type="text/css">
 .strong {
 	font-weight: bold;
 }
 	</style>
 	
 	
    <!--[if lt IE 9]>
    <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->

	<script src="http://code.jquery.com/jquery-1.10.1.min.js"></script>
	<script src="jquery.jocly.min.js"></script>
    <title>Jquery-jocly by mi-g</title>
    
    <script>
    $(document).ready(function() {
    	$("#jocly-pjn-white,#jocly-pjn-black,#jocly-pjn-when").hide();
    	$("#jocly-pjn")
    		.joclyPJN("setOptions",{
    			onParsedGame: function(game) {
    				console.log("parsed tags",game.tags);
    				if(game.tags.White)
    					$("#jocly-pjn-white").show().find("span").text(game.tags.White);
    				else
    					$("#jocly-pjn-white").hide();
    				if(game.tags.Black)
    					$("#jocly-pjn-black").show().find("span").text(game.tags.Black);
    				else
    					$("#jocly-pjn-black").hide();
    				if(game.tags.Date)
    					$("#jocly-pjn-when").show().find("span").text(game.tags.Date);
    				else
    					$("#jocly-pjn-when").hide();
    			},
    		})
    		.joclyPJN("attachApplet",$("#jocly-applet"))
    		.joclyPJN("load",$("#jocly-pjn-data").text());

    	var navigation=false;
    	var history=false;
    	var controls=false;
    	var toolbar=false;
    	
    	function UpdateAppletOptions() {
    		$("#jocly-applet").jocly("setFeatures",{
    			hasNavigation: navigation,
    			hasControls: controls,
    			hasHistory: history,
    			hasToolbar: toolbar,
    		});
    	}
    	
    	UpdateAppletOptions();
    	
    	$("#toggleNavigation").on("click",function() {
    		navigation=!navigation;
    		UpdateAppletOptions();
    	});
    	$("#toggleHistory").on("click",function() {
    		history=!history;
    		UpdateAppletOptions();
    	});
    	$("#toggleToolbar").on("click",function() {
    		toolbar=!toolbar;
    		UpdateAppletOptions();
    	});
    	$("#toggleControls").on("click",function() {
    		controls=!controls;
    		UpdateAppletOptions();
    	});
    	
    	$("#fullscreen").on("click",function() {
    		$("#jocly-applet").joclyFullscreen();
    	});
    	
    });
    </script>
    
  </head>

  <body>
    <header>
      <div class="inner">
        <h1>Jquery-jocly</h1>
        <h2>A jQuery plugin to integrate easily board games into a web site</h2>
        <a href="https://github.com/mi-g/jquery-jocly" class="button"><small>View project on</small>GitHub</a>
      </div>
    </header>
    

    <div id="content-wrapper">
      <div class="inner clearfix">
        <section id="main-content">
        
        	<a href="index.html">Home</a>

        	<h1>PJN view demo</h1>
        	
		    <div id="jocly-applet" data-jocly='{"ratio":.85}'></div>

        	<a id="fullscreen">Fullscreen</a>
       

		    <div>
		    	<h3>Original PJN text</h3>
				<pre id="jocly-pjn-data">
[Event "Valencia"]
[Site "Valencia"]
[Date "1475.??.??"]
[EventDate "1475.??.??"]
[Round "?"]
[Result "1-0"]
[White "Francesco di Castellvi"]
[Black "Narciso Vinyoles"]
[ECO "B01"]
[WhiteElo "?"]
[BlackElo "?"]
[PlyCount "41"]

1. e4 {This game may be the oldest recorded game of chess.} d5
2. exd5 Qxd5 3. Nc3 Qd8 4. Bc4 Nf6 5. Nf3 Bg4 6. h3 Bxf3
7. Qxf3 e6 8. Qxb7 Nbd7 9. Nb5 Rc8 10. Nxa7 Nb6 11. Nxc8 Nxc8
12. d4 Nd6 13. Bb5+ Nxb5 14. Qxb5+ Nd7 15. d5 exd5 16. Be3 Bd6
17. Rd1 Qf6 18. Rxd5 Qg6 19. Bf4 Bxf4 20. Qxd7+ Kf8 21. Qd8#
1-0
				</pre>
		    </div>


        
        </section>
        <aside id="sidebar">
        	<div id="jocly-pjn-white">White: <span class="strong"></span></div>
        	<div id="jocly-pjn-black">Black: <span class="strong"></span></div>
        	<div id="jocly-pjn-when">When: <span class="strong"></span></div>
        	<br/>
			<div id="jocly-pjn" data-jocly-pjn></div>
        	<p><i>Click on the moves above to update the board</i></p>
        	<p><button id="toggleNavigation">Toggle navigation</button></p>
        	<p><button id="toggleHistory">Toggle history</button></p>
        	<p><button id="toggleControls">Toggle controls</button></p>
        	<p><button id="toggleToolbar">Toggle toolbar</button></p>
        </aside>

      </div>
    </div>

            <script type="text/javascript">
            var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
            document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
          </script>
          <script type="text/javascript">
            try {
              var pageTracker = _gat._getTracker("UA-1041911-15");
            pageTracker._trackPageview();
            } catch(err) {}
          </script>

  </body>
</html>
